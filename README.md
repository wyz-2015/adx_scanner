# adx\_scanner

## 简介

一款简陋的命令行工具，用于从未压缩的字节流中提取.adx音频文件。

提取逻辑简单粗暴，检测到.adx文件头尾对即行提取。故此，适用条件为：已知该批.adx文件包含于某二进制文件中，且已知.adx数据流本身未经压缩。

综上，本小工具有优缺点：

### 优点

* 可以未知.adx文件所在归档包的解包方法。

### 缺点

* 效率不如其他工具。在已知所在归档包解包的方法时，不建议使用此工具。(例如，已知包含于.AFS文件中，则使用.AFS解包工具更为高效。)
* 若目标.adx文件本身也存在残缺的情况，程序则容易出错，无法完成任务。(此时建议直接使用或配合使用十六进制工具手工提取。)

## 依赖

由于使用了glibc提供的`error.h`和`argp.h`，编译时请确保使用`glibc`。本工具除此没有额外的依赖了。

## 编译

在下日常使用`Kubuntu`，只知道本工具在Linux下编译运行是没有问题的。

很抱歉在下没法在`Windows`上进行测试。我只能知道Windows上编译时，应该将`Makefile`中的`TARGET=adx_scanner`改为`TARGET=adx_scanner.exe`。如果阁下知道在Windows上编译时的额外注意事项，敬请指出。

如果准备妥当，编译只需要键入命令：

```
make
```

## 使用方法

```
Usage: adx_scanner [OPTION...]

  -i, --input_file=FILE      输入文件路径   必需
  -l, --log_file[=FILE]      输出记录文件的路径 可选
  -o, --out_dir=DIR          输出文件目录   必需
  -s, --buffer_size[=SIZE]
                             文件IO中缓冲区的大小(单位MB)。若要处理大体积文件，可以考虑设置这个参数 可选
  -?, --help                 Give this help list
      --usage                Give a short usage message

```

提醒：

* 使用短选项时，格式应像`-s32`，参数与选项名之间不留空格。
* 对于“可选”的参数，在使用长选项指定时，必须使用类似`--buffer_size=32`的格式，选项名与参数间不能用空格分割。“必需”的参数则上述两种写法皆可。
